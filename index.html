<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cognitio+ | Dynamic PWA</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800&family=Poppins:wght@400;500;600;700&family=Roboto+Condensed:wght@300;400;700&family=Oswald:wght@500&display=swap" rel="stylesheet">

    <style>
        /* Custom Scrollbar & Animation Enhancements */
        body { background-color: #f8f9fa; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        @keyframes pulse-ring {
            0% { transform: scale(0.33); opacity: 1; }
            80%, 100% { opacity: 0; }
        }
        .pulse-ring {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            animation: pulse-ring 1.25s cubic-bezier(0.215, 0.61, 0.355, 1) infinite;
            background-color: rgba(180, 37, 170, 0.3);
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- 1. ICON ENGINE (Replaces lucide-react import) ---
        // Mapping essential SVG paths for the app to function without npm
        const CreateIcon = ({ path, size = 24, className = "", fill="none", color="currentColor" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill={fill} stroke={color} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                {path}
            </svg>
        );

        const ICONS_PATHS = {
            Shield: <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>,
            User: <><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></>,
            Settings: <path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.09a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/></path>,
            Menu: <path d="M4 12h16M4 6h16M4 18h16"/>,
            X: <path d="M18 6L6 18M6 6l12 12"/>,
            Home: <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/>,
            Activity: <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/>,
            Heart: <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>,
            Moon: <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>,
            Zap: <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/>,
            ArrowLeft: <path d="M19 12H5M12 19l-7-7 7-7"/>,
            ArrowRight: <path d="M5 12h14M12 5l7 7-7 7"/>,
            Check: <polyline points="20 6 9 17 4 12"/>,
            CheckCircle: <><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></>,
            Lock: <><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></>,
            Mail: <><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></>,
            Eye: <><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></>,
            EyeOff: <><path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"/><line x1="1" y1="1" x2="23" y2="23"/></>,
            Sparkles: <><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/></>,
            TrendingUp: <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/><polyline points="17 6 23 6 23 12"/>,
            Award: <><circle cx="12" cy="8" r="7"/><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"/></>,
            Users: <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/>,
            Gift: <polyline points="20 12 20 22 4 22 4 12"/><rect x="2" y="7" width="20" height="5"/><line x1="12" y1="22" x2="12" y2="7"/><path d="M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"/><path d="M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"/>,
            Play: <polygon points="5 3 19 12 5 21 5 3"/>,
            BookOpen: <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/>,
            Wind: <path d="M9.59 4.59A2 2 0 1 1 11 8H2m10.59 11.41A2 2 0 1 0 14 16H2m15.73-8.27A2.5 2.5 0 1 1 19.5 12H2"/>,
            Smile: <circle cx="12" cy="12" r="10"/><path d="M8 14s1.5 2 4 2 4-2 4-2"/><line x1="9" y1="9" x2="9.01" y2="9"/><line x1="15" y1="9" x2="15.01" y2="9"/>,
            CheckSquare: <polyline points="9 11 12 14 22 4"/><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"/>,
            DollarSign: <line x1="12" y1="1" x2="12" y2="23"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>,
            Bell: <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/><path d="M13.73 21a2 2 0 0 1-3.46 0"/>,
            Smartphone: <rect x="5" y="2" width="14" height="20" rx="2" ry="2"/><line x1="12" y1="18" x2="12.01" y2="18"/>,
            Facebook: <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"/>
        };

        // Dynamically create components for usage
        const Lucide = {};
        Object.keys(ICONS_PATHS).forEach(key => {
            Lucide[key] = (props) => <CreateIcon path={ICONS_PATHS[key]} {...props} />;
        });

        // Destructure for cleaner code
        const { 
            Shield, User, Settings, Moon, Home, Activity, BookOpen, Menu, X, Heart, Zap, Smile, 
            ArrowLeft, Play, CheckCircle, Mail, Lock, Eye, EyeOff, Facebook, Bell, Smartphone, 
            DollarSign, Check, Sparkles, ArrowRight, TrendingUp, Users, Award, Wind, CheckSquare 
        } = Lucide;

        // --- 2. GLOBAL STYLES & BRANDING ---
        const GlobalStyles = () => (
          <style>{`
            :root {
              --cognitio-primary: #b425aa;
              --cognitio-purple: #c80ec9;
              --cognitio-gold: #D4AF37;
              --cognitio-neutral: #f8f9fa;
            }
            body {
              font-family: 'Roboto Condensed', sans-serif;
              background-color: var(--cognitio-neutral);
              color: #334155;
            }
            h1, h2, h3, h4, h5, h6 { font-family: 'Poppins', sans-serif; }
            .brand-font { font-family: 'Montserrat', sans-serif; }
            .oswald-font { font-family: 'Oswald', sans-serif; }
            
            .animate-fadeIn { animation: fadeIn 0.3s ease-in-out; }
            @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
            
            /* For Well-Be Charts */
            .bar-graph { display: flex; align-items: flex-end; gap: 4px; height: 60px; }
            .bar { flex: 1; background: #e2e8f0; border-radius: 2px; transition: height 0.5s ease; }
            .bar.active { background: #b425aa; }
          `}</style>
        );

        // Asset Constants
        const ICONS = {
            logo: 'https://579557-c8ed3d25e86041dcbd15c382ded585e0-1-latest.app.mgx.dev/assets/cognitio-main-logo.png',
            resilience: 'https://appimize.app/assets/apps/user_1097/images/20aa97ab307c_945_1097.png',
            habit: 'https://appimize.app/assets/apps/user_1097/images/2eb035e66921_749_1097.png',
            wellbe: 'https://appimize.app/assets/apps/user_1097/images/59e4d59b8372_727_1097.png',
            emotion: 'https://appimize.app/assets/apps/user_1097/images/1fbf3fc9faa2_81_1097.png',
            oasis: 'https://appimize.app/assets/apps/user_1097/images/30eb29593783_604_1097.png',
            growth: 'https://appimize.app/assets/apps/user_1097/images/2d5cb5dadead_225_1097.png',
            psych: 'https://appimize.app/assets/apps/user_1097/images/bae59281d566_404_1097.png',
            partner: 'https://appimize.app/assets/apps/user_1097/images/d2e70ec09200_94_1097.png',
            rooted: 'https://appimize.app/assets/apps/user_1097/images/bfbcbeb7bb69_808_1097.png',
            awareness: 'https://appimize.app/assets/apps/user_1097/images/ee4a29071876_35_1097.png',
            technology: 'https://appimize.app/assets/apps/user_1097/images/a00e6e94af97_251_1097.png'
        };

        // --- 3. UI PRIMITIVES ---
        const Button = ({ className, variant = 'primary', children, ...props }) => {
            const baseStyle = "px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center justify-center gap-2";
            const variants = {
                primary: "bg-[#b425aa] text-white hover:bg-[#9d1f94] shadow-md hover:shadow-lg",
                outline: "border border-gray-300 bg-white text-gray-700 hover:bg-gray-50",
                ghost: "text-gray-600 hover:bg-gray-100",
                danger: "bg-red-50 text-red-600 hover:bg-red-100",
                gold: "bg-[#D4AF37] text-white hover:bg-[#b8962e] shadow-md"
            };
            return <button className={`${baseStyle} ${variants[variant]} ${className}`} {...props}>{children}</button>;
        };
        const Card = ({ children, className }) => <div className={`bg-white rounded-2xl shadow-sm border border-gray-100 ${className}`}>{children}</div>;
        const Input = ({ className, ...props }) => <input className={`w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#b425aa] focus:border-transparent ${className}`} {...props} />;
        const Label = ({ children, className }) => <label className={`block text-sm font-medium text-gray-700 mb-1 ${className}`}>{children}</label>;
        const Switch = ({ checked, onCheckedChange }) => (
            <button onClick={() => onCheckedChange(!checked)} className={`w-11 h-6 rounded-full transition-colors relative ${checked ? 'bg-[#b425aa]' : 'bg-gray-200'}`}>
                <div className={`w-5 h-5 bg-white rounded-full absolute top-0.5 transition-transform ${checked ? 'left-[calc(100%-22px)]' : 'left-0.5'}`} />
            </button>
        );

        // --- 4. LAYOUT COMPONENTS ---
        const CognitioLogo = ({ size = 'md' }) => {
            const sizes = { sm: 'w-8 h-8', md: 'w-12 h-12', lg: 'w-24 h-24', xl: 'w-32 h-32' };
            return <img src={ICONS.logo} alt="Cognitio+ Logo" className={`${sizes[size]} object-contain`} />;
        };

        const GreetingMessage = () => {
            const hour = new Date().getHours();
            let greeting = { text: "Good evening", msg: "Time to wind down.", icon: "ðŸŒ™" };
            if (hour < 12) greeting = { text: "Good morning", msg: "Start your day with mindfulness.", icon: "ðŸŒ…" };
            else if (hour < 18) greeting = { text: "Good afternoon", msg: "Hope your day is going well.", icon: "â˜€ï¸" };

            return (
                <div className="mb-6 text-white">
                    <h2 className="text-3xl font-bold">{greeting.text} {greeting.icon}</h2>
                    <p className="text-purple-100 font-medium">{greeting.msg}</p>
                </div>
            );
        };

        const AppLayout = ({ children, user, onLogout, onNavigate, onLoginClick }) => {
            const [isMenuOpen, setIsMenuOpen] = useState(false);
            return (
                <div className="min-h-screen flex flex-col bg-[#f8f9fa]">
                    <GlobalStyles />
                    <header className="bg-white border-b border-gray-100 shadow-sm sticky top-0 z-50">
                        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">
                            <div className="flex items-center gap-2 cursor-pointer" onClick={() => onNavigate('home')}>
                                <CognitioLogo size="sm" />
                                <span className="brand-font font-bold text-xl text-[#b425aa]">Cognitio<span className="text-[#D4AF37]">+</span></span>
                            </div>
                            <div className="hidden md:flex items-center gap-6">
                                {user ? (
                                    <>
                                        <nav className="flex items-center gap-4">
                                            <button onClick={() => onNavigate('dashboard')} className="text-gray-600 hover:text-[#b425aa]">Dashboard</button>
                                            <button onClick={() => onNavigate('settings')} className="text-gray-600 hover:text-[#b425aa]">Settings</button>
                                        </nav>
                                        <div className="flex items-center gap-3">
                                            <div className="w-8 h-8 rounded-full bg-[#b425aa]/10 text-[#b425aa] flex items-center justify-center font-bold">
                                                {user.name.charAt(0).toUpperCase()}
                                            </div>
                                            <button onClick={onLogout} className="text-sm text-red-500 hover:text-red-700 font-medium">Sign Out</button>
                                        </div>
                                    </>
                                ) : (
                                    <Button onClick={onLoginClick} size="sm">Login / Sign Up</Button>
                                )}
                            </div>
                            <button className="md:hidden p-2" onClick={() => setIsMenuOpen(!isMenuOpen)}>
                                {isMenuOpen ? <X /> : <Menu />}
                            </button>
                        </div>
                        {isMenuOpen && (
                            <div className="md:hidden bg-white border-t border-gray-100 p-4 shadow-lg absolute w-full">
                                <nav className="flex flex-col gap-4">
                                    {user ? (
                                        <>
                                            <button onClick={() => { onNavigate('dashboard'); setIsMenuOpen(false); }} className="text-left text-gray-700">Dashboard</button>
                                            <button onClick={() => { onNavigate('settings'); setIsMenuOpen(false); }} className="text-left text-gray-700">Settings</button>
                                            <button onClick={() => { onLogout(); setIsMenuOpen(false); }} className="text-left text-red-500">Sign Out</button>
                                        </>
                                    ) : (
                                        <Button onClick={() => { onLoginClick(); setIsMenuOpen(false); }}>Login / Sign Up</Button>
                                    )}
                                </nav>
                            </div>
                        )}
                    </header>
                    <main className="flex-1 w-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 animate-fadeIn">
                        {children}
                    </main>
                </div>
            );
        };

        // --- 5. FEATURE COMPONENTS ---

        const StatsInfographic = () => (
            <div className="grid grid-cols-1 md:grid-cols-3 gap-6 py-8 px-4 w-full max-w-6xl mx-auto">
                {[
                    { icon: Users, val: "1 in 5", desc: "Adults experience mental illness each year.", color: "purple" },
                    { icon: TrendingUp, val: "60%", desc: "Of people with mental health conditions go untreated.", color: "green" },
                    { icon: Award, val: "4x", desc: "Improvement in resilience with regular practice.", color: "blue" }
                ].map((stat, i) => (
                    <div key={i} className="bg-white p-6 rounded-2xl shadow-sm border border-gray-100 flex flex-col items-center text-center">
                        <div className={`w-12 h-12 bg-${stat.color}-100 text-${stat.color}-600 rounded-full flex items-center justify-center mb-4`}><stat.icon size={24}/></div>
                        <h3 className="text-4xl font-bold text-gray-900 mb-2">{stat.val}</h3>
                        <p className="text-gray-500 text-sm">{stat.desc}</p>
                    </div>
                ))}
            </div>
        );

        const FeatureShowcase = () => {
            const features = [
                { title: "Resilience Navigator", desc: "Build strength with CASE Framework.", icon: ICONS.resilience },
                { title: "Habit Design Studio", desc: "Create lasting habits with B=MAP.", icon: ICONS.habit },
                { title: "Well-Be Monitor", desc: "Track physiological stress via HRV.", icon: ICONS.wellbe },
                { title: "Emotion Tracker", desc: "Understand feelings with Hawkins Scale.", icon: ICONS.emotion },
                { title: "Oasis Sanctuary", desc: "Find peace with guided mindfulness.", icon: ICONS.oasis },
                { title: "Professional Care", desc: "Connect with licensed experts.", icon: ICONS.psych },
            ];
            return (
                <div className="py-12 max-w-6xl mx-auto px-4">
                    <h2 className="text-3xl font-bold text-center mb-10 brand-font">Comprehensive Wellness Tools</h2>
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                        {features.map((feat, i) => (
                            <div key={i} className="flex items-start gap-4 p-4 rounded-xl hover:bg-white/50 transition-colors">
                                <img src={feat.icon} className="w-16 h-16 object-contain" alt={feat.title} />
                                <div>
                                    <h4 className="font-bold text-lg text-gray-800">{feat.title}</h4>
                                    <p className="text-gray-600 text-sm leading-relaxed">{feat.desc}</p>
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            );
        };

        const SubscriptionCTA = ({ onSubscribe }) => (
            <section className="relative max-w-5xl mx-auto px-6 py-16 bg-gradient-to-r from-[#b425aa] to-[#c80ec9] rounded-3xl shadow-2xl overflow-hidden my-12 text-center">
                <div className="relative z-10">
                    <div className="inline-flex items-center justify-center w-16 h-16 rounded-full bg-[#f3e329] text-[#c80ec9] mb-6 shadow-lg"><Sparkles className="h-8 w-8" /></div>
                    <h2 className="text-3xl md:text-4xl font-bold font-[Oswald] text-white mb-6">Unlock Advanced Wellness</h2>
                    <Button onClick={onSubscribe} size="lg" className="bg-[#f3e329] text-[#c80ec9] px-10 py-4 text-lg font-[Montserrat] rounded-full mx-auto">Subscribe Now <ArrowRight className="ml-2" /></Button>
                </div>
            </section>
        );

        const AuthModal = ({ isOpen, onClose, onLogin }) => {
            const [activeTab, setActiveTab] = useState('login');
            const [formData, setFormData] = useState({ email: '', password: '', name: '' });
            const [isLoading, setIsLoading] = useState(false);

            if (!isOpen) return null;

            const handleSubmit = (e) => {
                e.preventDefault();
                setIsLoading(true);
                setTimeout(() => {
                    setIsLoading(false);
                    onLogin({
                        id: 'user_' + Date.now(),
                        name: formData.name || 'Test User',
                        email: formData.email,
                        userType: 'individual'
                    });
                }, 1000);
            };

            return (
                <div className="fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm animate-fadeIn p-4">
                    <div className="bg-white rounded-2xl w-full max-w-md overflow-hidden shadow-2xl">
                        <div className="flex border-b border-gray-200">
                            {['login', 'signup'].map(tab => (
                                <button key={tab} onClick={() => setActiveTab(tab)} className={`flex-1 py-4 text-sm font-bold uppercase tracking-wider ${activeTab === tab ? 'text-[#b425aa] border-b-2 border-[#b425aa] bg-purple-50' : 'text-gray-500 hover:bg-gray-50'}`}>{tab}</button>
                            ))}
                        </div>
                        <div className="p-8">
                            <h2 className="text-2xl oswald-font text-[#b425aa] text-center mb-6">{activeTab === 'login' ? 'Welcome Back' : 'Join Cognitio+'}</h2>
                            <form onSubmit={handleSubmit} className="space-y-4">
                                {activeTab === 'signup' && (
                                    <div className="space-y-2">
                                        <Label>Full Name</Label>
                                        <Input type="text" placeholder="Enter your name" value={formData.name} onChange={e => setFormData({...formData, name: e.target.value})} />
                                    </div>
                                )}
                                <div className="space-y-2">
                                    <Label>Email</Label>
                                    <Input type="email" placeholder="user@example.com" value={formData.email} onChange={e => setFormData({...formData, email: e.target.value})} required />
                                </div>
                                <div className="space-y-2">
                                    <Label>Password</Label>
                                    <Input type="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" value={formData.password} onChange={e => setFormData({...formData, password: e.target.value})} required />
                                </div>
                                <Button type="submit" className="w-full mt-6" disabled={isLoading}>{isLoading ? "Processing..." : (activeTab === 'login' ? "Sign In" : "Create Account")}</Button>
                            </form>
                        </div>
                        <div className="bg-gray-50 px-8 py-4 text-center"><button onClick={onClose} className="text-gray-500 hover:text-gray-700 text-sm font-medium">Cancel</button></div>
                    </div>
                </div>
            );
        };

        const SettingsComponent = ({ onBack }) => (
            <div className="max-w-4xl mx-auto space-y-6">
                <div className="flex items-center gap-4 mb-8">
                    <button onClick={onBack} className="p-2 hover:bg-gray-100 rounded-full"><ArrowLeft /></button>
                    <h1 className="text-2xl font-bold">Settings</h1>
                </div>
                <Card className="p-6">
                    <div className="flex items-center gap-2 mb-4"><Bell className="text-[#b425aa]"/> <h3 className="text-lg font-bold">Notifications</h3></div>
                    <div className="space-y-4">
                        <div className="flex justify-between"><span>Push Notifications</span><Switch checked={true} onCheckedChange={()=>{}}/></div>
                        <div className="flex justify-between"><span>Email Summaries</span><Switch checked={false} onCheckedChange={()=>{}}/></div>
                    </div>
                </Card>
            </div>
        );

        // --- 6. WELL-BE COMPONENT (Enhanced & Completed) ---
        const WellBe = ({ onBack }) => {
            const [activeTab, setActiveTab] = useState('dashboard');
            const [measuring, setMeasuring] = useState(false);
            const [progress, setProgress] = useState(0);
            const [result, setResult] = useState(null);

            // Simulate Sensor Reading
            const startMeasurement = () => {
                setMeasuring(true);
                setProgress(0);
                const interval = setInterval(() => {
                    setProgress(p => {
                        if (p >= 100) {
                            clearInterval(interval);
                            setMeasuring(false);
                            setResult(78 + Math.floor(Math.random() * 10)); 
                            return 100;
                        }
                        return p + 1.5;
                    });
                }, 50);
            };

            const renderDashboard = () => (
                <div className="space-y-6 animate-fadeIn">
                    <div className="bg-gradient-to-r from-[#b425aa] to-[#c80ec9] rounded-3xl p-6 text-white shadow-xl flex flex-col items-center justify-center py-10 relative overflow-hidden">
                        <div className="absolute top-0 right-0 w-48 h-48 bg-white/10 rounded-full blur-2xl"></div>
                        <div className="w-40 h-40 rounded-full border-8 border-white/20 flex items-center justify-center relative z-10">
                            <div className="text-center"><span className="text-5xl font-bold font-['Oswald']">{result || 85}</span><p className="text-xs uppercase">Wellness Score</p></div>
                            <svg className="absolute top-0 left-0 w-full h-full -rotate-90" viewBox="0 0 100 100"><circle cx="50" cy="50" r="46" fill="none" stroke="white" strokeWidth="8" strokeDasharray="289" strokeDashoffset="50" strokeLinecap="round" /></svg>
                        </div>
                        <p className="mt-4 text-white/90 font-medium">You are well recovered today!</p>
                    </div>
                    <div className="grid grid-cols-2 gap-4">
                        <div className="bg-white p-4 rounded-2xl shadow-sm border border-gray-100"><div className="flex gap-2 mb-2 text-gray-500 text-sm"><Moon size={16} className="text-indigo-500"/> Sleep</div><p className="text-2xl font-bold">7h 42m</p></div>
                        <div className="bg-white p-4 rounded-2xl shadow-sm border border-gray-100"><div className="flex gap-2 mb-2 text-gray-500 text-sm"><Activity size={16} className="text-pink-500"/> HRV</div><p className="text-2xl font-bold">{result ? result - 15 : 65} ms</p></div>
                        <div className="bg-white p-4 rounded-2xl shadow-sm border border-gray-100"><div className="flex gap-2 mb-2 text-gray-500 text-sm"><Heart size={16} className="text-red-500"/> Heart Rate</div><p className="text-2xl font-bold">72 bpm</p></div>
                        <div className="bg-white p-4 rounded-2xl shadow-sm border border-gray-100"><div className="flex gap-2 mb-2 text-gray-500 text-sm"><Zap size={16} className="text-yellow-500"/> Stress</div><p className="text-2xl font-bold">Low</p></div>
                    </div>
                </div>
            );

            const renderMeasure = () => (
                <div className="flex flex-col items-center py-8 animate-fadeIn">
                    <div className="relative w-64 h-64 mb-8">
                        <div className="absolute inset-0 bg-gray-900 rounded-full flex items-center justify-center overflow-hidden border-4 border-gray-200">
                            {measuring ? (
                                <><div className="pulse-ring"></div><Heart className="text-red-500 animate-bounce relative z-10" size={64} /><div className="absolute bottom-8 text-white font-mono text-xl relative z-10">Scanning...</div></>
                            ) : result ? (
                                <div className="text-center"><span className="text-5xl font-bold text-green-400">{result}</span><p className="text-white text-sm uppercase mt-2">HRV Score</p></div>
                            ) : (
                                <div className="text-center p-6"><Activity className="text-gray-500 mx-auto mb-2" size={48} /><p className="text-gray-400 text-sm">Place finger over camera</p></div>
                            )}
                        </div>
                        <svg className="absolute top-0 left-0 w-full h-full -rotate-90 pointer-events-none">
                            <circle cx="128" cy="128" r="124" fill="none" stroke="#e2e8f0" strokeWidth="4" />
                            {measuring && <circle cx="128" cy="128" r="124" fill="none" stroke="#b425aa" strokeWidth="4" strokeDasharray="779" strokeDashoffset={779 - (779 * progress / 100)} strokeLinecap="round" className="transition-all duration-75" />}
                        </svg>
                    </div>
                    {measuring ? (
                        <div className="text-center"><h3 className="text-xl font-bold">Measuring HRV</h3><p className="text-gray-500">Remain still...</p></div>
                    ) : result ? (
                        <div className="text-center space-y-4"><h3 className="text-2xl font-bold">Measurement Complete</h3><div className="flex gap-3 justify-center"><Button onClick={() => { setResult(null); setProgress(0); }} variant="outline">Discard</Button><Button onClick={() => setActiveTab('dashboard')}>Save Data</Button></div></div>
                    ) : (
                        <Button onClick={startMeasurement} size="lg" className="rounded-full px-12 py-4 text-lg shadow-xl">Start Measurement</Button>
                    )}
                </div>
            );

            return (
                <div className="max-w-xl mx-auto">
                    <div className="flex items-center mb-6"><button onClick={onBack} className="mr-4 text-gray-500 hover:text-[#b425aa]"><ArrowLeft /></button><h1 className="text-2xl font-bold brand-font">Well-Be Monitor</h1></div>
                    <div className="bg-gray-100 p-1 rounded-xl flex mb-8">
                        {['dashboard', 'measure', 'insights'].map(tab => (
                            <button key={tab} onClick={() => setActiveTab(tab)} className={`flex-1 py-2 text-sm font-bold capitalize rounded-lg transition-all ${activeTab === tab ? 'bg-white text-[#b425aa] shadow-sm' : 'text-gray-500 hover:text-gray-700'}`}>{tab}</button>
                        ))}
                    </div>
                    <div className="min-h-[400px]">{activeTab === 'dashboard' ? renderDashboard() : activeTab === 'measure' ? renderMeasure() : <div className="text-center py-10"><Sparkles className="mx-auto mb-4 text-yellow-400" size={32}/><h3 className="font-bold text-lg">Premium Insights</h3><p className="text-gray-500">Upgrade to view detailed correlation analysis.</p></div>}</div>
                </div>
            );
        };

        // Dashboard Home View
        const DashboardHome = ({ user, onNavigate }) => (
            <div className="space-y-8">
                <div className="bg-[#b425aa] rounded-3xl p-8 text-white shadow-xl relative overflow-hidden">
                    <div className="relative z-10">
                        <GreetingMessage />
                        <div className="mt-6 flex gap-3">
                            <Button onClick={() => onNavigate('resilience-navigator')} className="bg-white text-[#b425aa] hover:bg-gray-50 border-none"><Play size={16} fill="currentColor" /> Start Session</Button>
                            <Button onClick={() => onNavigate('well-be')} variant="outline" className="bg-transparent border-white text-white hover:bg-white/20 hover:text-white"><Activity size={16} /> Check HRV</Button>
                        </div>
                    </div>
                </div>
                <div>
                    <h3 className="text-xl font-bold text-gray-800 mb-4 flex items-center gap-2"><CheckCircle className="text-green-500" size={20} /> Daily Goals</h3>
                    <div className="grid md:grid-cols-3 gap-4">
                        <div onClick={() => onNavigate('oasis')} className="bg-white p-4 rounded-xl border border-gray-100 flex items-center gap-4 shadow-sm hover:shadow-md cursor-pointer"><div className="w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600"><Wind size={20}/></div><div><p className="font-bold text-gray-800">Mindfulness</p><p className="text-xs text-gray-500">10 min remaining</p></div></div>
                        <div onClick={() => onNavigate('habit-studio')} className="bg-white p-4 rounded-xl border border-gray-100 flex items-center gap-4 shadow-sm hover:shadow-md cursor-pointer"><div className="w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center text-purple-600"><CheckSquare size={20}/></div><div><p className="font-bold text-gray-800">Habit Check</p><p className="text-xs text-gray-500">2/5 completed</p></div></div>
                        <div onClick={() => onNavigate('emotion-tracker')} className="bg-white p-4 rounded-xl border border-gray-100 flex items-center gap-4 shadow-sm hover:shadow-md cursor-pointer"><div className="w-10 h-10 rounded-full bg-yellow-100 flex items-center justify-center text-yellow-600"><Smile size={20}/></div><div><p className="font-bold text-gray-800">Mood Log</p><p className="text-xs text-gray-500">Not logged yet</p></div></div>
                    </div>
                </div>
                <div>
                    <h3 className="text-xl font-bold text-gray-800 mb-4">Explore Cognitio+</h3>
                    <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                        {[{id:'resilience-navigator', l:'Resilience', i:ICONS.resilience}, {id:'habit-studio', l:'Habits', i:ICONS.habit}, {id:'well-be', l:'Well-Be', i:ICONS.wellbe}, {id:'emotion-tracker', l:'Emotions', i:ICONS.emotion}, {id:'oasis', l:'Oasis', i:ICONS.oasis}, {id:'psych-assess', l:'Care', i:ICONS.psych}, {id:'growth-tribe', l:'Community', i:ICONS.growth}, {id:'subscription-plans', l:'Upgrade', i:ICONS.technology}].map(item => (
                            <button key={item.id} onClick={() => onNavigate(item.id)} className="bg-white p-4 rounded-xl border border-gray-100 hover:border-[#b425aa] hover:shadow-md transition-all flex flex-col items-center text-center gap-3 group"><img src={item.i} className="w-12 h-12 object-contain group-hover:scale-110 transition-transform" /><span className="font-medium text-sm text-gray-700">{item.l}</span></button>
                        ))}
                    </div>
                </div>
            </div>
        );

        // Feature Placeholder Generic View
        const FeaturePlaceholder = ({ title, icon, onBack }) => (
            <div className="text-center py-12">
                <button onClick={onBack} className="mb-4 text-gray-500 hover:text-[#b425aa] flex items-center justify-center gap-1 mx-auto"><ArrowLeft size={16}/> Back</button>
                <div className="w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4"><img src={icon} className="w-10 h-10 object-contain" /></div>
                <h2 className="text-2xl font-bold text-gray-800">{title}</h2>
                <p className="text-gray-500">Feature loaded successfully.</p>
            </div>
        );

        const SubscriptionPlaceholder = ({ onBack }) => (
             <div className="max-w-4xl mx-auto">
                <button onClick={onBack} className="mb-4 text-gray-500 hover:text-[#b425aa] flex items-center gap-1"><ArrowLeft size={16}/> Back to Home</button>
                <div className="bg-white p-8 rounded-2xl shadow-sm border border-gray-100 text-center">
                    <div className="inline-flex items-center justify-center w-16 h-16 rounded-full bg-[#f3e329] text-[#c80ec9] mb-6"><Sparkles size={32}/></div>
                    <h1 className="text-3xl font-bold text-gray-900 mb-4">Subscription Plans</h1>
                    <p className="text-gray-500 mb-8 max-w-lg mx-auto">Unlock the full power of the Cognitio+ ecosystem with advanced analytics and resilience insights.</p>
                    <div className="grid md:grid-cols-3 gap-6 text-left">
                        {['Basic', 'Premium', 'Professional'].map((plan, i) => (
                            <div key={plan} className={`border rounded-xl p-6 ${i===1 ? 'border-[#b425aa] bg-purple-50 relative' : 'border-gray-200'}`}>
                                {i===1 && <span className="absolute -top-3 left-1/2 -translate-x-1/2 bg-[#b425aa] text-white text-xs px-3 py-1 rounded-full">Most Popular</span>}
                                <h3 className="font-bold text-xl mb-2">{plan}</h3>
                                <p className="text-2xl font-bold mb-4">â‚±{i===0 ? '0' : i===1 ? '499' : '1,299'}<span className="text-sm font-normal text-gray-500">/mo</span></p>
                                <Button className={`w-full ${i===1 ? 'bg-[#b425aa] text-white' : 'bg-gray-100 text-gray-900'}`}>{i===0 ? 'Current Plan' : 'Upgrade'}</Button>
                            </div>
                        ))}
                    </div>
                </div>
            </div>
        );

        // --- 7. MAIN APP ORCHESTRATOR ---
        const App = () => {
            const [user, setUser] = useState(null);
            const [currentView, setCurrentView] = useState('home');
            const [isAuthModalOpen, setAuthModalOpen] = useState(false);

            const handleNavigate = (view) => {
                window.scrollTo({ top: 0, behavior: 'smooth' });
                setCurrentView(view);
            };

            const handleLogin = (userData) => {
                setUser(userData);
                setAuthModalOpen(false);
                handleNavigate('dashboard');
            };

            const handleLogout = () => {
                setUser(null);
                handleNavigate('home');
            };

            const renderContent = () => {
                switch (currentView) {
                    case 'home':
                        return user ? <DashboardHome user={user} onNavigate={handleNavigate} /> : (
                            <div className="animate-fadeIn space-y-12">
                                <div className="text-center max-w-4xl mx-auto mt-8">
                                    <h1 className="text-5xl md:text-6xl font-bold text-gray-900 mb-6 tracking-tight">Master Your Mind.<br/><span className="text-transparent bg-clip-text bg-gradient-to-r from-[#b425aa] to-[#D4AF37]">Design Your Life.</span></h1>
                                    <p className="text-xl text-gray-600 mb-10 max-w-2xl mx-auto">Cognitio+ combines psychological science, biometric data, and habit design.</p>
                                    <div className="flex justify-center gap-4"><Button onClick={() => setAuthModalOpen(true)} size="lg" className="rounded-full px-8 py-4">Get Started Free</Button></div>
                                </div>
                                <FeatureShowcase />
                                <StatsInfographic />
                                <SubscriptionCTA onSubscribe={() => handleNavigate('subscription-plans')} />
                            </div>
                        );
                    case 'dashboard': return user ? <DashboardHome user={user} onNavigate={handleNavigate} /> : handleNavigate('home');
                    case 'settings': return <SettingsComponent onBack={() => handleNavigate('dashboard')} />;
                    case 'well-be': return <WellBe onBack={() => handleNavigate('dashboard')} />;
                    case 'subscription-plans': return <SubscriptionPlaceholder onBack={() => handleNavigate(user ? 'dashboard' : 'home')} />;
                    default: return <FeaturePlaceholder title={currentView.replace('-', ' ').toUpperCase()} icon={ICONS.resilience} onBack={() => handleNavigate('dashboard')} />;
                }
            };

            return (
                <AppLayout user={user} onLogout={handleLogout} onNavigate={handleNavigate} onLoginClick={() => setAuthModalOpen(true)}>
                    {renderContent()}
                    <AuthModal isOpen={isAuthModalOpen} onClose={() => setAuthModalOpen(false)} onLogin={handleLogin} />
                </AppLayout>
            );
        };

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
